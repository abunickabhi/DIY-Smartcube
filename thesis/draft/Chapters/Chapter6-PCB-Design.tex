% Chapter Template

\chapter{The Transmitter} % Main chapter title
\label{Chapter6} 


\section{Introduction}
The transmitter for the sound-based move tracking protocol is in charge of creating the tones representing each centerpiece's current state, and updating those tones each time a centerpiece changes state.

This chapter will detail a prototype PCB design containing only nine discrete components capable of generating all the tones required for encoding one centerpiece's state.

\section{Requirements}
\label{sec:transmitter-requirements}
This section will detail the constraints within which the transmitter will be required to operate. These constraints include the physical size of the transmitter (Section \ref{subsec:prospects-of-miniaturization}), the precision of tone generation (Section \ref{subsec:precision-of-tone-generation}), the reliability of the transmitter in changing tones to reflect a face turn (Section \ref{subsec:responsiveness-to-face-turns}), and the intensity of output audio that the transmitter can produce (Section \ref{subsec:transmitter-signal-to-noise-ratio}).

\subsection{Prospects of Miniaturization}
\label{subsec:prospects-of-miniaturization}
The transmitter must be both removable and small enough to fit in the center cap of each face of a speedcube.
This requirement stems from two sources.
First, in contrast to all existing smartcubes, most non-smartcubes have small, solid cores (Figure \ref{fig:356-core-closed}) that provide no extra space for the inclusion of any electronics, but do have a small amount of open space within their center cubies (Figure \ref{fig:356-core-open}).
Second, the use of a cube with non-removable, embedded electronics violates the WCA competition regulation 2i \cite{wca-regulations} (See also Section \ref{subsec:competition-regulations}).
\begin{figure}[h]
    \centering
    \caption{Internal pieces of a standard speedcube (Gans 356)}
    \label{fig:356-core}
    \begin{subfigure}{.45\textwidth}
        \centering
        \caption{View of the small, solid plastic core}
        \label{fig:356-core-closed}
        \includegraphics[width=\linewidth]{Figures/6 PCB Design/356_core_cropped.jpg}
    \end{subfigure}
    \begin{subfigure}{.45\textwidth}
        \centering
        \caption{View of the space inside the centerpiece}
        \label{fig:356-core-open}
        \includegraphics[width=\linewidth]{Figures/6 PCB Design/356_core_open_cropped.jpg}
    \end{subfigure}
\end{figure}

\subsection{Precision of Tone Generation}
\label{subsec:precision-of-tone-generation}
While the receiver specified in Chapter \ref{Chapter5} supports custom state to frequency mappings, it expects that the frequency corresponding to each centerpiece's state stays constant throughout the entire audio recording.
As such, the chosen transmitter design can encode centerpiece states with any frequency (assuming the chosen frequencies work within the constraints specified in Section \ref{sec:protocol-requirements}), but it must produce its chosen frequencies with high precision.

\subsection{Responsiveness to Face Turns}
\label{subsec:responsiveness-to-face-turns}
The chosen transmitter design must respond to an applied face turn by changing the currently transmitted audio frequency to the frequency corresponding to the new centerpiece state.

\subsection{Signal-to-Noise Ratio}
\label{subsec:transmitter-signal-to-noise-ratio}
The transmitter must create tones loud enough to be easily distinguished from ambient noise, including the sound of the Rubik's Cube's own turns.
In light of the above requirement for the transmitter to fit within a center cubie (\ref{subsec:prospects-of-miniaturization}), this requirement will also require the transmitter design to consider how to overcome any audio dampening caused by such an enclosure.


\section{Hardware Selection}

TODO outline the process of choosing specific hardware to use for this project

\subsection{Minimizing Sound Obstruction}
TODO Discuss the "tupperware" tests -> design of various center caps.


\section{Prototyping}

TODO detail the process of building a prototype. Include pictures of the board and the generated spectrograms.
